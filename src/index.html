<html>
  <title>Sudoku Genius</title>

  <body>
    <head>
      <meta charset="UTF-8" />
      <title>Sudoku Genius</title>
      <link rel="icon" type="image/x-icon" href="static/favicon.ico" />
      <link
        href="https://fonts.googleapis.com/css?family=Pacifico"
        rel="stylesheet"
        type="text/css"
      />
      <link
        href="https://fonts.googleapis.com/css?family=Lato"
        rel="stylesheet"
        type="text/css"
      />
      <link rel="stylesheet" href="static/style.css" />
    </head>

    <div class="sudokusolver">
      <h1>Sudoku Genius</h1>
      <button id="toggle">‚è∏Ô∏è Pause solver</button>
      <button id="reset">üîÑ Reset solver</button>
      <div><span id="resultString">Loading...</span></div>

      <video
        autoplay
        playsinline
        muted
        id="webcam"
        width="474px"
        height="474px"
      ></video>
      <table class="tableNoBorder">
        <tr>
          <td><span class="tableHeader">What the neural network saw</span></td>
          <td><span class="tableHeader">Solution</span></td>
        </tr>
        <tr>
          <td>
            <table class="SudokuGridDigits">
              <tr>
                <td><canvas id="00" class="cell"></canvas></td>
                <td><canvas id="01" class="cell"></canvas></td>
                <td><canvas id="02" class="cell"></canvas></td>
                <td><canvas id="03" class="cell"></canvas></td>
                <td><canvas id="04" class="cell"></canvas></td>
                <td><canvas id="05" class="cell"></canvas></td>
                <td><canvas id="06" class="cell"></canvas></td>
                <td><canvas id="07" class="cell"></canvas></td>
                <td><canvas id="08" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="10" class="cell"></canvas></td>
                <td><canvas id="11" class="cell"></canvas></td>
                <td><canvas id="12" class="cell"></canvas></td>
                <td><canvas id="13" class="cell"></canvas></td>
                <td><canvas id="14" class="cell"></canvas></td>
                <td><canvas id="15" class="cell"></canvas></td>
                <td><canvas id="16" class="cell"></canvas></td>
                <td><canvas id="17" class="cell"></canvas></td>
                <td><canvas id="18" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="20" class="cell"></canvas></td>
                <td><canvas id="21" class="cell"></canvas></td>
                <td><canvas id="22" class="cell"></canvas></td>
                <td><canvas id="23" class="cell"></canvas></td>
                <td><canvas id="24" class="cell"></canvas></td>
                <td><canvas id="25" class="cell"></canvas></td>
                <td><canvas id="26" class="cell"></canvas></td>
                <td><canvas id="27" class="cell"></canvas></td>
                <td><canvas id="28" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="30" class="cell"></canvas></td>
                <td><canvas id="31" class="cell"></canvas></td>
                <td><canvas id="32" class="cell"></canvas></td>
                <td><canvas id="33" class="cell"></canvas></td>
                <td><canvas id="34" class="cell"></canvas></td>
                <td><canvas id="35" class="cell"></canvas></td>
                <td><canvas id="36" class="cell"></canvas></td>
                <td><canvas id="37" class="cell"></canvas></td>
                <td><canvas id="38" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="40" class="cell"></canvas></td>
                <td><canvas id="41" class="cell"></canvas></td>
                <td><canvas id="42" class="cell"></canvas></td>
                <td><canvas id="43" class="cell"></canvas></td>
                <td><canvas id="44" class="cell"></canvas></td>
                <td><canvas id="45" class="cell"></canvas></td>
                <td><canvas id="46" class="cell"></canvas></td>
                <td><canvas id="47" class="cell"></canvas></td>
                <td><canvas id="48" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="50" class="cell"></canvas></td>
                <td><canvas id="51" class="cell"></canvas></td>
                <td><canvas id="52" class="cell"></canvas></td>
                <td><canvas id="53" class="cell"></canvas></td>
                <td><canvas id="54" class="cell"></canvas></td>
                <td><canvas id="55" class="cell"></canvas></td>
                <td><canvas id="56" class="cell"></canvas></td>
                <td><canvas id="57" class="cell"></canvas></td>
                <td><canvas id="58" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="60" class="cell"></canvas></td>
                <td><canvas id="61" class="cell"></canvas></td>
                <td><canvas id="62" class="cell"></canvas></td>
                <td><canvas id="63" class="cell"></canvas></td>
                <td><canvas id="64" class="cell"></canvas></td>
                <td><canvas id="65" class="cell"></canvas></td>
                <td><canvas id="66" class="cell"></canvas></td>
                <td><canvas id="67" class="cell"></canvas></td>
                <td><canvas id="68" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="70" class="cell"></canvas></td>
                <td><canvas id="71" class="cell"></canvas></td>
                <td><canvas id="72" class="cell"></canvas></td>
                <td><canvas id="73" class="cell"></canvas></td>
                <td><canvas id="74" class="cell"></canvas></td>
                <td><canvas id="75" class="cell"></canvas></td>
                <td><canvas id="76" class="cell"></canvas></td>
                <td><canvas id="77" class="cell"></canvas></td>
                <td><canvas id="78" class="cell"></canvas></td>
              </tr>
              <tr>
                <td><canvas id="80" class="cell"></canvas></td>
                <td><canvas id="81" class="cell"></canvas></td>
                <td><canvas id="82" class="cell"></canvas></td>
                <td><canvas id="83" class="cell"></canvas></td>
                <td><canvas id="84" class="cell"></canvas></td>
                <td><canvas id="85" class="cell"></canvas></td>
                <td><canvas id="86" class="cell"></canvas></td>
                <td><canvas id="87" class="cell"></canvas></td>
                <td><canvas id="88" class="cell"></canvas></td>
              </tr>
            </table>
          </td>
          <td>
            <table id="SudokuGridSolved" class="SudokuGridDigits">
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>

      <span class="footerText"
        >The tool works locally in your browser, no data is uploaded.</span
      >
      <span class="footerText">Faith Chia ¬© 2021</span>
      <br />
      <div style="text-align: center">
        <a href="#" onclick="toggleDebug();" id="debugButton"></a>
      </div>

      <div id="debug">
        <div>
          <hr />
          Debug info
          <p id="debugInfo" />
        </div>

        <div>
          <hr />
          Debug timings
          <p id="debugTimings" />
        </div>

        <div>
          <hr />
          Page load time
          <p id="pageLoadTime" display="none" />
        </div>
      </div>
    </div>
    <script>
      const resultString = document.getElementById("resultString");
      const isiOSChrome = /crios/i.test(navigator.userAgent);
      const toggleButton = document.getElementById("toggle");
      const resetButton = document.getElementById("reset");
      const debugButton = document.getElementById("debugButton");
      const debugInfo = document.getElementById("debugInfo");
      const debug = document.getElementById("debug");
      const tables = document.querySelectorAll("table");
      const pageLoadTime = document.getElementById("pageLoadTime");
      pageLoadTime.innerText = Date.now();

      let prevRunTime = Date.now();
      const addDebugInfo = (addString) => {
        const currentTime = new Date();
        const timeElapsed = currentTime - prevRunTime;
        prevRunTime = Date.now();
        const debugString = `${currentTime.getHours()} ${currentTime.getMinutes()} ${currentTime.getSeconds()} ${currentTime.getMilliseconds()} (+${timeElapsed}) ${addString}`;
        console.log(debugString);
        debugInfo.innerHTML += `<br>${debugString}`;
      };

      // Hide all UI elements while resources are loading
      toggleButton.style.display = "none";
      resetButton.style.display = "none";
      webcam.style.display = "none";
      tables.forEach((table) => {
        table.style.display = "none";
        console.log("table none");
      });

      // Hide debug info by default
      debug.style.display = "block";
      function toggleDebug() {
        debug.style.display =
          debug.style.display === "block" ? "none" : "block";
        debugButton.innerText =
          debug.style.display === "block" ? "Hide debug" : "Show debug";
      }
      toggleDebug();
    </script>
    <script
      src="static/tfjs.js"
      onload="addDebugInfo('tfjs loaded');"
      type="text/javascript"
    ></script>
    <script
      src="static/opencv.js"
      onload="addDebugInfo('opencv loaded');"
      type="text/javascript"
    ></script>
    <script type="module" src="main.js"></script>
  </body>
</html>
